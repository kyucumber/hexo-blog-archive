<!DOCTYPE html><html lang="kr"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>스프링 부트와 Angular로 게시판 만들기 - 1. 프로젝트 생성하기 | Devlog</title><link rel="stylesheet" href="/libs/spoqa-han-sans-kr/css/SpoqaHanSans-kr.css"><link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/css/highlights/dracula.css"><link rel="canonical" href="http://yoursite.com/java/spring/spring-boot-angular-01/"/>
<meta name="description" content="개발 환경 프로젝트 개발 환경은 다음과 같다.  IDE : IntelliJ IDEA Ultimate Git Tools : Source Tree OS : Mac OS X SpringBoot 2.0.1 Java8, Kotlin(Dto만…">
<meta name="keywords" content="Java,Spring">
<meta property="og:type" content="article">
<meta property="og:title" content="스프링 부트와 Angular로 게시판 만들기 - 1. 프로젝트 생성하기">
<meta property="og:url" content="http://yoursite.com/java/spring/spring-boot-angular-01/">
<meta property="og:site_name" content="Devlog">
<meta property="og:description" content="개발 환경 프로젝트 개발 환경은 다음과 같다.  IDE : IntelliJ IDEA Ultimate Git Tools : Source Tree OS : Mac OS X SpringBoot 2.0.1 Java8, Kotlin(Dto만…">
<meta property="og:locale" content="kr">
<meta property="og:image" content="http://yoursite.com/images/java/spring/spring.jpg">
<meta property="og:updated_time" content="2018-05-02T14:40:09.543Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="스프링 부트와 Angular로 게시판 만들기 - 1. 프로젝트 생성하기">
<meta name="twitter:description" content="개발 환경 프로젝트 개발 환경은 다음과 같다.  IDE : IntelliJ IDEA Ultimate Git Tools : Source Tree OS : Mac OS X SpringBoot 2.0.1 Java8, Kotlin(Dto만…">
<meta name="twitter:image" content="http://yoursite.com/images/java/spring/spring.jpg"><meta property="article:author" content="https://www.facebook.com/xmfpes"><meta property="twitter:label1" content="Published at"><meta property="twitter:data1" content="2018-05-01 21:30:00"><meta property="twitter:label2" content="Written by"><meta property="twitter:data2" content="KyuNam"><link rel="icon" href="/images/internet.png"><link rel="alternate" href="/atom.xml" type="application/atom+xml" title="Devlog"></head><body itemscope itemtype="https://schema.org/WebPage"><nav class="menu" id="menu"><div class="menu-inner"><div class="menu__left-area"><div class="menu__item"><a class="menu__item__link menu__item__link--brand" href="/" title="Home" rel="home"><img class="menu__item__link--brand__image" src="/images/internet.png" alt="Devlog"><span class="menu__item__link--brand__label">Devlog</span></a></div></div><div class="menu__right-area"><div class="menu__item"><a class="menu__item__link" href="/">Home</a></div><div class="menu__item"><a class="menu__item__link" href="/about">About</a></div><div class="menu__item"><a class="menu__item__link" href="/archives">Archives</a></div></div></div></nav><div class="page-background"></div><div class="content-container"><div class="content-outer"><div class="content-inner" itemscope itemtype="https://schema.org/Blog"><article class="article" id="article" itemscope itemtype="https://schema.org/BlogPosting"><h1 class="article__title" itemprop="headline">스프링 부트와 Angular로 게시판 만들기 - 1. 프로젝트 생성하기</h1><div class="article__meta"><time class="article__meta__time" datetime="2018-05-01T12:30:00.000Z" itemprop="datePublished">2018-05-01 21:30:00</time><div class="article__meta__categories"><a class="article__meta__categories__item" href="/categories/Backend/">Backend</a><span class="article__meta__categories__separator">></span><a class="article__meta__categories__item" href="/categories/Backend/Java/">Java</a><span class="article__meta__categories__separator">></span><a class="article__meta__categories__item" href="/categories/Backend/Java/Spring/">Spring</a></div></div><div class="article__contents"><img src="/images/java/spring/spring.jpg"/><p>개발 환경</p>
<p>프로젝트 개발 환경은 다음과 같다.</p>
<ul>
<li>IDE : IntelliJ IDEA Ultimate</li>
<li>Git Tools : Source Tree</li>
<li>OS : Mac OS X</li>
<li>SpringBoot 2.0.1</li>
<li>Java8, Kotlin(Dto만 kotlin으로..)</li>
<li>JPA</li>
<li>Amazon RDS(maria DB),  H2(로컬)</li>
<li>Gradle</li>
</ul>
<p>Dto 클래스만 kotlin으로 작성해보자. lombok때문에 좀 더 번거로워지고, 좀 더 정신없을거 같긴 하지만 좀 익숙해지려고..</p>
<h2 id="intelliJ에서-프로젝트-생성하기"><a href="#intelliJ에서-프로젝트-생성하기" class="headerlink" title="intelliJ에서 프로젝트 생성하기"></a>intelliJ에서 프로젝트 생성하기</h2><p>프로젝트와 관련된 내용들 적고, Gradle Project로 지정 후 생성하기</p>
<p><img src="/images/java/spring/moduleSetting.png" alt=""></p>
<p>사용할 dependencies들 셋팅하기.</p>
<p>Lombok, Web, JPA, H2, Actuator … 나중에 사용할 Maria DB, Security 등은 지금부터 설정하면 빌드될 때 귀찮아지니까 나중에 생성하자.</p>
<p><img src="/images/java/spring/dependencies.png" alt="dependencies"></p>
<p>이제 IntelliJ에 프로젝트를 추가하자.</p>
<h2 id="GitHub를-이용한-프로젝트-관리"><a href="#GitHub를-이용한-프로젝트-관리" class="headerlink" title="GitHub를 이용한 프로젝트 관리"></a>GitHub를 이용한 프로젝트 관리</h2><ul>
<li>Local Git Repository 생성하기</li>
</ul>
<p>우선 전에 만들어서 IntelliJ에 등록한 프로젝트를 Git 프로젝트로 만들자.</p>
<p>이제 Local git repository가 생성되고 Github에 연동을 해야 한다.</p>
<p><img src="/images/java/spring/createRepo.png" alt=""></p>
<ul>
<li>SourceTree에 Local Repository 추가하기</li>
</ul>
<p>SourceTree에서 아래처럼 Local Repository를 등록하자.</p>
<p><img src="/images/java/spring/local.png" alt=""></p>
<ul>
<li>Local Repository에 remote(Github Repository) 추가하기</li>
</ul>
<p>이제 Github와 같이 연동을 하고 관리를 하기 위해서 Github remote를 추가하자.</p>
<p>Github에 Repo를 생성해두고, Github에서 생성한 Repository의 remote 추가 후 commit, push</p>
<p><img src="/images/java/spring/sourcetree.png" alt="sourcetree"></p>
<ul>
<li>Repository Branch 분리하기</li>
</ul>
<p>그냥 master에서 전부 진행해도 되겠지만, branch를 master, develop, feature로 분리해 개발을 진행하자. 나중에 Travis CI를 연동하고 master에 merge가 되는 순간 배포되도록 설정할거기 때문에 develop에 개발을 완료해 머지하고 테스트 후 이상이 없으면 master에 머지하자.</p>
<p><img src="/images/java/spring/branches.png" alt=""></p>
<h2 id="코틀린-설정하기"><a href="#코틀린-설정하기" class="headerlink" title="코틀린 설정하기"></a>코틀린 설정하기</h2><p>별로 설정한 내용은 없고, 코틀린 공식 문서를 보고 참고했다.</p>
<p>코틀린 설정으로 아예 스프링 프로젝트를 생성해도 되는데 그냥 섞어서 써보기로 했다.</p>
<p><a href="https://kotlinlang.org/docs/reference/using-gradle.html#configuring-dependencies" target="_blank" rel="noopener">Gradle Kotlin plugin</a> </p>
<p>build.gradle 파일에 아래의 설정들을 추가하면 된다.</p>
<p>추가될 내용은 <code>ext.kotlin_version = &#39;1.2.41&#39;</code>, <code>classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">buildscript &#123;</span><br><span class="line">    ext.kotlin_version = &apos;1.2.41&apos;</span><br><span class="line"></span><br><span class="line">    repositories &#123;</span><br><span class="line">        mavenCentral()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    dependencies &#123;</span><br><span class="line">        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>JVM을 대상으로 지정해야 하기 때문에 아래의 내용도 추가.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: &quot;kotlin&quot;</span><br></pre></td></tr></table></figure>
<p>자바와 코틀린 경로를 분리하는게 기본 설정이지만 나는 그냥 같이 섞어 쓸거니까 아래의 설정도 추가.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sourceSets &#123;</span><br><span class="line">    main.kotlin.srcDirs += &apos;src/main/myKotlin&apos;</span><br><span class="line">    main.java.srcDirs += &apos;src/main/myJava&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>기본 규칙은 아래처럼 분리해서 사용하는 것이다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">project</span><br><span class="line">    - src</span><br><span class="line">        - main (root)</span><br><span class="line">            - kotlin</span><br><span class="line">            - java</span><br></pre></td></tr></table></figure>
<p>아래의 5개도 추가 자바 8이라서 jdk8을 추가한다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">compile &quot;org.jetbrains.kotlin:kotlin-stdlib&quot;</span><br><span class="line">compile &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk8&quot;</span><br><span class="line">compile &quot;org.jetbrains.kotlin:kotlin-reflect&quot;</span><br><span class="line">testCompile &quot;org.jetbrains.kotlin:kotlin-test&quot;</span><br><span class="line">testCompile &quot;org.jetbrains.kotlin:kotlin-test-junit&quot;</span><br></pre></td></tr></table></figure>
<h3 id="build-gradle"><a href="#build-gradle" class="headerlink" title="build.gradle"></a>build.gradle</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">buildscript &#123;</span><br><span class="line">	ext.kotlin_version = &apos;1.2.41&apos;</span><br><span class="line">	ext &#123;</span><br><span class="line">		springBootVersion = &apos;2.0.1.RELEASE&apos;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	repositories &#123;</span><br><span class="line">		mavenCentral()</span><br><span class="line">	&#125;</span><br><span class="line">	dependencies &#123;</span><br><span class="line">		classpath(&quot;org.springframework.boot:spring-boot-gradle-plugin:$&#123;springBootVersion&#125;&quot;)</span><br><span class="line">		classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">apply plugin: &apos;kotlin&apos;</span><br><span class="line">apply plugin: &apos;java&apos;</span><br><span class="line">apply plugin: &apos;eclipse&apos;</span><br><span class="line">apply plugin: &apos;org.springframework.boot&apos;</span><br><span class="line">apply plugin: &apos;io.spring.dependency-management&apos;</span><br><span class="line"></span><br><span class="line">group = &apos;com.tram&apos;</span><br><span class="line">version = &apos;0.0.1-SNAPSHOT&apos;</span><br><span class="line">sourceCompatibility = 1.8</span><br><span class="line"></span><br><span class="line">repositories &#123;</span><br><span class="line">	mavenCentral()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sourceSets &#123;</span><br><span class="line">	main.kotlin.srcDirs += &apos;src/main/java&apos;</span><br><span class="line">	main.java.srcDirs += &apos;src/main/java&apos;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">	compile &quot;org.jetbrains.kotlin:kotlin-stdlib&quot;</span><br><span class="line">	compile &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk8&quot;</span><br><span class="line">	compile &quot;org.jetbrains.kotlin:kotlin-reflect&quot;</span><br><span class="line">	testCompile &quot;org.jetbrains.kotlin:kotlin-test&quot;</span><br><span class="line">	testCompile &quot;org.jetbrains.kotlin:kotlin-test-junit&quot;</span><br><span class="line">	compile(&apos;org.springframework.boot:spring-boot-starter-actuator&apos;)</span><br><span class="line">	compile(&apos;org.springframework.boot:spring-boot-starter-data-jpa&apos;)</span><br><span class="line">	compile(&apos;org.springframework.boot:spring-boot-starter-web&apos;)</span><br><span class="line">	runtime(&apos;org.springframework.boot:spring-boot-devtools&apos;)</span><br><span class="line">	compile(&apos;com.h2database:h2&apos;)</span><br><span class="line">	compileOnly(&apos;org.projectlombok:lombok&apos;)</span><br><span class="line">	testCompile(&apos;org.springframework.boot:spring-boot-starter-test&apos;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>위의 내용만 추가하면 별 이상 없이(lombok을 못 써서 이상이 있긴 하다.) 자바랑 kotlin을 섞어서 쓸 수 있다.</p>
<p>코틀린 코드에서는 Lombok을 사용한 자바 코드를 로드하지 못하는데.. <code>@Builder, @Setter, @Getter</code>등등 방법이 없는건 아닌거 같은데 그냥 코틀린 코드에서는 호출하지 않기로..Dto만 사용하니까 별로 쓸 일이 없을 듯.</p>
<p>원인은 잘 모르겠지만 롬복 코드가 생성되기 전에 코틀린 코드가 빌드되니까 뭐 안되겠지?</p>
<p>위의 코드는 <a href="https://github.com/tramyu/spring-boot-angular-board/blob/feature/kotlin-setting/build.gradle" target="_blank" rel="noopener">Github feature/kotlin-setting</a>에 있다.</p>
<h2 id="Domain-테스트-코드-작성하기"><a href="#Domain-테스트-코드-작성하기" class="headerlink" title="Domain, 테스트 코드 작성하기"></a>Domain, 테스트 코드 작성하기</h2><p>게시글을 저장할 Domain을 작성하자. 파일첨부나 그런것도 추가할거긴 한데 일단은 간단하게 제목, 내용, 작성자만 추가하고 구현할 기능에 따라 추가해보자.</p>
<p>JPA와 연동될 Entity 클래스를 작성하자. DB와 직접 연동될 클래스니 최대한 변경되지 않도록 데이터 전달을 위한 Dto 클래스는 따로 만들자</p>
<p>사실 아래의 <code>@Builder나 @NoArgs</code>는 코틀린 Dto를 사용해서 필요가 없는데 그냥 둔다.</p>
<ul>
<li>Posts.java</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.tram.springbootangularboard.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.persistence.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span>(access = AccessLevel.PROTECTED)</span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@Table</span>(name=<span class="string">"posts"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Posts</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span></span><br><span class="line">    <span class="meta">@Column</span>(name=<span class="string">"post_id"</span>)</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column</span>(name=<span class="string">"title"</span>, length = <span class="number">500</span>, nullable = <span class="keyword">false</span>)</span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column</span>(name=<span class="string">"content"</span>, columnDefinition = <span class="string">"TEXT"</span>, nullable = <span class="keyword">false</span>)</span><br><span class="line">    <span class="keyword">private</span> String content;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column</span>(name=<span class="string">"author"</span>)</span><br><span class="line">    <span class="keyword">private</span> String author;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Builder</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Posts</span><span class="params">(String title, String content, String author)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.title = title;</span><br><span class="line">        <span class="keyword">this</span>.content = content;</span><br><span class="line">        <span class="keyword">this</span>.author = author;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>아래 kt에서 <code>@Builder</code>로 생성된 코드를 사용할 수 없다. 그냥 있어보이게 그대로 두자.</p>
<ul>
<li>PostsSaveRequestDto.kt</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.tram.springbootangularboard.dto</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.tram.springbootangularboard.domain.Posts</span><br><span class="line"></span><br><span class="line"><span class="function">data class <span class="title">PostsSaveRequestDto</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">        var title: String = <span class="string">""</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">        var content: String = <span class="string">""</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">        var author: String = <span class="string">""</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span>&#123;</span><br><span class="line">    <span class="function">fun <span class="title">toEntity</span><span class="params">()</span>: Posts </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Posts(<span class="keyword">this</span>.title, <span class="keyword">this</span>.content, <span class="keyword">this</span>.author);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>PostsRepository.java</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.tram.springbootangularboard.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.data.jpa.repository.JpaRepository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">PostsRepository</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">Posts</span>, <span class="title">Long</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>PostsRepositoryTest.java</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.tram.springbootangularboard.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.After;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Import;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.Transactional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RunWith</span>(SpringRunner.class)</span><br><span class="line"><span class="meta">@DataJpaTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PostsRepositoryTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> PostsRepository postsRepository;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cleanup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         이후 테스트 코드에 영향을 끼치지 않기 위해</span></span><br><span class="line"><span class="comment">         테스트 메소드가 끝날때 마다 respository 전체 비우는 코드</span></span><br><span class="line"><span class="comment">         **/</span></span><br><span class="line">        postsRepository.deleteAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> 게시글작성테스트 () &#123;</span><br><span class="line">        Posts posts = <span class="keyword">new</span> Posts();</span><br><span class="line"></span><br><span class="line">        postsRepository.save(posts.builder()</span><br><span class="line">                .title(<span class="string">"제목"</span>)</span><br><span class="line">                .content(<span class="string">"내용"</span>)</span><br><span class="line">                .author(<span class="string">"tram"</span>).build());</span><br><span class="line">        List&lt;Posts&gt; insertedPosts = postsRepository.findAll();</span><br><span class="line">        Posts insertedPost = insertedPosts.get(<span class="number">0</span>);</span><br><span class="line">        assertEquals(<span class="string">"제목"</span>, insertedPost.getTitle());</span><br><span class="line">        assertEquals(<span class="string">"내용"</span>, insertedPost.getContent());</span><br><span class="line">        assertEquals(<span class="string">"tram"</span>, insertedPost.getAuthor());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>PostsRestController.java</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.tram.springbootangularboard.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.tram.springbootangularboard.domain.Posts;</span><br><span class="line"><span class="keyword">import</span> com.tram.springbootangularboard.domain.PostsRepository;</span><br><span class="line"><span class="keyword">import</span> com.tram.springbootangularboard.dto.PostsSaveRequestDto;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.HttpHeaders;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.HttpStatus;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.MediaType;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.ResponseEntity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/api/posts"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PostsRestController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> PostsRepository postsRepository;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">""</span>)</span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;List&lt;Posts&gt;&gt; read() &#123;</span><br><span class="line">        HttpHeaders responseHeaders = <span class="keyword">new</span> HttpHeaders();</span><br><span class="line">        responseHeaders.setContentType(MediaType.APPLICATION_JSON);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity&lt;&gt;(postsRepository.findAll(), responseHeaders, HttpStatus.OK);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">""</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity <span class="title">create</span><span class="params">(@RequestBody PostsSaveRequestDto postsSaveRequestDto)</span> </span>&#123;</span><br><span class="line">        postsRepository.save(postsSaveRequestDto.toEntity());</span><br><span class="line">        HttpHeaders responseHeaders = <span class="keyword">new</span> HttpHeaders();</span><br><span class="line">        responseHeaders.setContentType(MediaType.APPLICATION_JSON);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity&lt;&gt;(HttpStatus.CREATED);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>PostsRestControllerTest.java</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.tram.springbootangularboard.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"><span class="keyword">import</span> com.tram.springbootangularboard.dto.PostsSaveRequestDto;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.MediaType;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.web.servlet.MockMvc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.springframework.test.web.servlet.request.MockMvcRequestBuilders.post;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.springframework.test.web.servlet.result.MockMvcResultHandlers.print;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RunWith</span>(SpringRunner.class)</span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="meta">@AutoConfigureMockMvc</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PostsRestControllerTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> MockMvc mockMvc;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.mockMvc.perform(get(<span class="string">"/api/posts"</span>).accept(MediaType.APPLICATION_JSON))</span><br><span class="line">                .andDo(print())</span><br><span class="line">                .andExpect(status().isOk())</span><br><span class="line">                .andReturn();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">create</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        PostsSaveRequestDto param = <span class="keyword">new</span> PostsSaveRequestDto();</span><br><span class="line">        param.setTitle(<span class="string">"제목"</span>);</span><br><span class="line">        param.setContent(<span class="string">"내용"</span>);</span><br><span class="line">        param.setAuthor(<span class="string">"tram"</span>);</span><br><span class="line">        <span class="keyword">this</span>.mockMvc.perform(post(<span class="string">"/api/posts"</span>)</span><br><span class="line">                .content(asJsonString(param))</span><br><span class="line">                .accept(MediaType.APPLICATION_JSON)</span><br><span class="line">                .contentType(MediaType.APPLICATION_JSON))</span><br><span class="line">                .andDo(print())</span><br><span class="line">                .andExpect(status().isCreated())</span><br><span class="line">                .andReturn();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">asJsonString</span><span class="params">(<span class="keyword">final</span> Object obj)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ObjectMapper().writeValueAsString(obj);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>아직 코드를 제대로 작성한게 없어서 대충..그리고 일단 프론트 뷰가 조금 갖춰진 후에 작업을 하면 좋을 것 같다. Angular 세팅으로 넘어간다.</p>
<p>위의 코드는 <a href="https://github.com/tramyu/spring-boot-angular-board/tree/feature/create-domain" target="_blank" rel="noopener">Github feature/create-domain</a> 여기에 있다.</p>
</div><div class="article__tags"><a class="article__tags__item" href="/tags/Java/">Java</a><a class="article__tags__item" href="/tags/Spring/">Spring</a></div><div class="article__author" itemscope itemprop="author" itemtype="https://schema.org/Person"><img class="article__author__image" src="/images/profile.png" alt="KyuNam"><a class="article__author__link" title="About KyuNam" rel="author">KyuNam</a><p class="article__author__desc">dev log</p><div class="article__author__socials"><a class="article__author__socials__item" href="https://github.com/tramyu" title="github" target="_blank"><i class="fa fa-github"></i></a><a class="article__author__socials__item" href="https://www.facebook.com/xmfpes" title="facebook" target="_blank"><i class="fa fa-facebook"></i></a><a class="article__author__socials__item" href="https://www.linkedin.com/feed/" title="linkedin" target="_blank"><i class="fa fa-linkedin"></i></a><a class="article__author__socials__item" href="https://www.instagram.com/" title="instagram" target="_blank"><i class="fa fa-instagram"></i></a><a class="article__author__socials__item" href="/atom.xml" title="rss" target="_blank"><i class="fa fa-rss"></i></a></div><meta itemprop="name" content="KyuNam"></div><div class="sharer" id="sharer"><div class="sharer-inner"><div class="sharer__right"><button class="sharer__item" id="sharer-facebook"><i class="fa fa-facebook-official"></i></button><button class="sharer__item" id="sharer-twitter"><i class="fa fa-twitter"></i></button><button class="sharer__item" id="sharer-pinterest"><i class="fa fa-pinterest"></i></button><button class="sharer__item" id="sharer-pocket"><i class="fa fa-get-pocket"></i></button></div></div></div><!-- Disqus Code--><div id="disqus_thread"></div><script>(function() {
  var d = document, s = d.createElement('script');
  s.src = '//kyunam-disqus-com.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
})();</script><noscript>Enable JavaScript to see comments.</noscript><!-- Meta Tags for Structured Data--><meta itemprop="dateModified" content="2018-05-02T14:40:09.543Z"><meta itemprop="articleBody" content="개발 환경
프로젝트 개발 환경은 다음과 같다.

IDE : IntelliJ IDEA Ultimate
Git Tools : Source Tree
OS : Mac OS X
SpringBoot 2.0.1
Java8, Kotlin(Dto만 kotlin으로..)
JPA
Amazon RDS(maria DB),  H2(로컬)
Gradle

Dto 클래스만..."><meta itemprop="url" content="http://yoursite.com/java/spring/spring-boot-angular-01/"><meta itemprop="mainEntityOfPage" content="http://yoursite.com/java/spring/spring-boot-angular-01/"><div itemscope itemtype="https://schema.org/Organization" itemprop="publisher"><meta itemprop="name" content="Devlog"><div itemscope itemprop="logo" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="http://yoursite.com/images/internet.png"></div></div><div itemscope itemtype="https://schema.org/ImageObject" itemprop="image"><meta itemprop="contentUrl" content="http://yoursite.com/images/java/spring/spring.jpg"><meta itemprop="url" content="http://yoursite.com/images/java/spring/spring.jpg"><meta itemprop="width" content="1280"><meta itemprop="height" content="720"></div></article><section class="related-posts"><h3>Related posts</h3><div class="related-posts__item__wrapper"><a class="related-posts__item" href="/java/spring/spring-boot-angular-02/"><div class="related-posts__item__background" style="background-image:url('/images/java/spring/spring.jpg');"></div><div class="related-posts__item__overlay"></div><span class="related-posts__item__title">스프링 부트와 Angular로 게시판 만들기 - 2. Angular 프로젝트 초기 설정하기</span></a></div><div class="related-posts__item__wrapper"><a class="related-posts__item" href="/java/spring/spring-boot-angular-03/"><div class="related-posts__item__background" style="background-image:url('/images/java/spring/spring.jpg');"></div><div class="related-posts__item__overlay"></div><span class="related-posts__item__title">스프링 부트와 Angular로 게시판 만들기 - 3. 로그인</span></a></div><div class="related-posts__item__wrapper"><a class="related-posts__item" href="/java/spring/spring-security/"><div class="related-posts__item__background" style="background-image:url('/images/java/spring/spring.jpg');"></div><div class="related-posts__item__overlay"></div><span class="related-posts__item__title">Spring Security의 간략한 구조</span></a></div></section></div></div></div><footer id="footer"><div class="widgets"><div class="widgets-inner"><!-- Jade doesn't support dynamic inclusion with `each`.--><!-- So, I just hard coded the file names that will be included.--><div class="widgets__item"><h3 class="widgets__item__heading">Recent posts</h3><ul class="recent-posts"><li class="recent-posts__item"><a href="/etc/spring-deploy-ec2/">Spring Boot 프로젝트 EC2에 배포하기</a></li><li class="recent-posts__item"><a href="/etc/aws setting/">AWS EC2 생성 및 RDS 구축하기</a></li><li class="recent-posts__item"><a href="/java/spring/spring-profile/">Spring Profile 설정하기</a></li><li class="recent-posts__item"><a href="/etc/interview/">서버 개발자 면접 질문 정리</a></li><li class="recent-posts__item"><a href="/java/spring/spring-security/">Spring Security의 간략한 구조</a></li></ul></div><div class="widgets__item"><h3 class="widgets__item__heading">Categories</h3><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Backend/">Backend</a><span class="category-list-count">8</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Backend/Java/">Java</a><span class="category-list-count">8</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Backend/Java/DesignPattern/">DesignPattern</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Backend/Java/Spring/">Spring</a><span class="category-list-count">5</span></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Blog/">Blog</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Blog/Hexo/">Hexo</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/CS/">CS</a><span class="category-list-count">21</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/CS/Algorithm/">Algorithm</a><span class="category-list-count">20</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/CS/Datastructure/">Datastructure</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Frontend/">Frontend</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Frontend/Javascript/">Javascript</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Interview/">Interview</a><span class="category-list-count">3</span></li></ul></div><div class="widgets__item"><h3 class="widgets__item__heading">Tag cloud</h3><div class="tag-cloud"><a href="/tags/AbstractFactory/" style="font-size: 0.9rem;">AbstractFactory</a> <a href="/tags/Algorithm/" style="font-size: 1.5rem;">Algorithm</a> <a href="/tags/Graph/" style="font-size: 0.75rem;">Graph</a> <a href="/tags/Hexo/" style="font-size: 0.75rem;">Hexo</a> <a href="/tags/Interview/" style="font-size: 1.05rem;">Interview</a> <a href="/tags/Java/" style="font-size: 1.35rem;">Java</a> <a href="/tags/Javascript/" style="font-size: 0.9rem;">Javascript</a> <a href="/tags/Spring/" style="font-size: 1.2rem;">Spring</a></div></div></div></div><p class="copyright"><small>© 2018 KyuNam<br>Powered by <a href="https://hexo.io" rel="external" target="_blank">Hexo</a>, Theme by <a href="https://github.com/hyunseob" rel="external" target="_blank">HyunSeob</a></small></p></footer><script src="/js/sharer.min.js"></script></body></html>